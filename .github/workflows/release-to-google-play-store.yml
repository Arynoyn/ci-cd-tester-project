name: CD - Release to Google Play Store
on:
  release:
    types: [published]

jobs:
# releaseToGooglePlay:
#   name: Release to the Google Play Store
#   runs-on: ubuntu-latest
#   needs: buildWithLinux
#   if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') && contains(github.event.inputs.mode, 'android'))
#   env:
#     GOOGLE_PLAY_KEY_FILE: ${{ secrets.GOOGLE_PLAY_KEY_FILE }}
#     GOOGLE_PLAY_KEY_FILE_PATH: ${{ format('{0}/fastlane/api-finoldigital.json', github.workspace) }}
#     ANDROID_BUILD_FILE_PATH: ${{ format('{0}/build/Android/Android.aab', github.workspace) }}
#     ANDROID_PACKAGE_NAME: com.finoldigital.cardgamesim
#   steps:
#     - name: Checkout Repository
#       uses: actions/checkout@v2
#     - name: Download Android Artifact
#       uses: actions/download-artifact@v2
#       with:
#         name: cgs-Android
#         path: build/Android
#     - name: Write to Changelog
#       if: github.event.action == 'published'
#       env:
#         RELEASE_NOTES: ${{ github.event.release.body }}
#       run: echo "$RELEASE_NOTES" > fastlane/metadata/android/en-US/changelogs/default.txt
#     - name: Add Authentication
#       run: echo "$GOOGLE_PLAY_KEY_FILE" > $GOOGLE_PLAY_KEY_FILE_PATH
#     - name: Install Fastlane
#       uses: ruby/setup-ruby@v1
#       with:
#         ruby-version: 2.7.2
#         bundler-cache: true
#     - name: Upload to Google Play
#       uses: maierj/fastlane-action@v2.0.1
#       with:
#         lane: 'android playprod'